<?php
/**
 * we cant get the dipendency injector from controller during the construct
 * so we have the get it in here
 */
$di = $this->_controller->getDi();
?>
<div class="page-top-bottons d-flex justify-content-end">
	<?= $this->contentTopBottons->buttonsToHtml(); ?>
</div>

<div id="admin-grid-table" class="d-none">
	<table class="<?= $this->tableClass ?>">
		<thead v-if="columns">
			<tr>
				<th scope="col" v-for="column in columns">{{column.label}}</th>
			</tr>
		</thead>
		<tbody v-if="list_data && columns">
			<tr v-for="field in list_data.data">
				<td v-for="column in columns" v-html="field[column.column_name]"></td>
			</tr>
		</tbody>
	</table>

	<div class="pagination-container" v-if="list_data && columns">
		<nav aria-label="Page navigation example">
			<ul class="pagination d-flex align-items-center justify-content-end">
				<li class="page-item" v-if="list_data.current_page > 1">
					<a class="page-link" href="javascript:void(0)" v-on:click="goToPrevPage()">Previous</a>
				</li>
				<li class="page-item ms-3 me-2">Page <input class="text-center w-50-px" type="text" value="1" v-model="filters.filters.page" v-on:change="goToPage()"></li>
				<li class="page-item me-3">of {{list_data.total_page}}</li>
				<li class="page-item" v-if="list_data.total_page > list_data.current_page">
					<a class="page-link" href="javascript:void(0)" v-on:click="goToNextPage()">Next</a>
				</li>
			</ul>
		</nav>
	</div>
</div>

<script>
	require([
		'opoink/bmodule/js/admin/ui.components.grid.min'
	], function(grid){
		grid._data.setListingName('<?= $this->listingName ?>').getListing();
	});
</script>