<?php
/**
 * we cant get the dipendency injector from controller during the construct
 * so we have the get it in here
 */
$di = $this->_controller->getDi();
?>
<div class="page-top-bottons d-flex justify-content-end">
	<?= $this->contentTopBottons->buttonsToHtml(); ?>
</div>

<div id="admin-grid-table" class="d-none">
	<div class="pagination-container d-flex align-items-center justify-content-end mb-3" v-if="list_data && columns">
		<div class="d-flex align-items-center">
			<div for="pagination-limits" class="pe-0 d-block w-fit-content me-2">Per Page</div>
			<select class="builder-form-field form-select w-fit-content" type="select" name="status" value="" v-model="filters.filters.limit" v-on:change="changeLimitPerPage()">
				<option v-for="limit in limits" v-bind:value="limit" >{{limit}}</option>
			</select>
		</div>
		<div class="ms-2">
			<ul class="pagination d-flex align-items-center justify-content-end mb-0">
				<li class="page-item" v-if="list_data.current_page > 1">
					<a class="page-link" href="javascript:void(0)" v-on:click="goToPrevPage()">
						<i class="fa-solid fa-angles-left"></i>
					</a>
				</li>
				<li class="page-item ms-2 me-2">Page <input class="text-center w-65-px" type="text" value="1" v-model="filters.filters.page" v-on:change="goToPage()"></li>
				<li class="page-item me-2">of {{list_data.total_page}}</li>
				<li class="page-item" v-if="list_data.total_page > list_data.current_page">
					<a class="page-link" href="javascript:void(0)" v-on:click="goToNextPage()">
						<i class="fa-solid fa-angles-right"></i>
					</a>
				</li>
			</ul>
		</div>
	</div>

	<table class="<?= $this->tableClass ?>">
		<thead class="table-dark" v-if="columns">
			<tr>
				<th scope="col" v-for="column in columns">{{column.label}}</th>
			</tr>
		</thead>
		<tbody v-if="list_data && columns">
			<tr v-for="field in list_data.data">
				<td v-for="column in columns" v-html="field[column.column_name]"></td>
			</tr>
		</tbody>
	</table>

	<div class="pagination-container d-flex align-items-center justify-content-end" v-if="list_data && columns">
		<div class="d-flex align-items-center">
			<div for="pagination-limits" class="pe-0 d-block w-fit-content me-2">Per Page</div>
			<select class="builder-form-field form-select w-fit-content" type="select" name="status" value="" v-model="filters.filters.limit" v-on:change="changeLimitPerPage()">
				<option v-for="limit in limits" v-bind:value="limit" >{{limit}}</option>
			</select>
		</div>
		<div class="ms-2">
			<ul class="pagination d-flex align-items-center justify-content-end mb-0">
				<li class="page-item" v-if="list_data.current_page > 1">
					<a class="page-link" href="javascript:void(0)" v-on:click="goToPrevPage()">
						<i class="fa-solid fa-angles-left"></i>
					</a>
				</li>
				<li class="page-item ms-2 me-2">Page <input class="text-center w-65-px" type="text" value="1" v-model="filters.filters.page" v-on:change="goToPage()"></li>
				<li class="page-item me-2">of {{list_data.total_page}}</li>
				<li class="page-item" v-if="list_data.total_page > list_data.current_page">
					<a class="page-link" href="javascript:void(0)" v-on:click="goToNextPage()">
						<i class="fa-solid fa-angles-right"></i>
					</a>
				</li>
			</ul>
		</div>
	</div>
</div>

<script>
	require([
		'opoink/bmodule/js/admin/ui.components.grid.min'
	], function(grid){
		grid._data.setListingName('<?= $this->listingName ?>').getListing();
	});
</script>